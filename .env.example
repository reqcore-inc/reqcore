# ─────────────────────────────────────────────
# Applirank — Environment Variables
# ─────────────────────────────────────────────
# Copy this file to .env and fill in the values.
# Railway auto-detects this file and suggests variables during setup.

# ─── Database (Docker Compose) ──────────────
# Used by docker-compose.yml to configure the local Postgres container
DB_USER=admin
DB_PASSWORD=changeme
DB_NAME=applirank

# ─── Database (App) ─────────────────────────
# PostgreSQL connection string (must match Docker Compose values above for local dev)
# Railway: provided automatically via ${{Postgres.DATABASE_URL}}
DATABASE_URL=postgresql://admin:changeme@localhost:5432/applirank

# ─── Authentication ──────────────────────────
# Random string, minimum 32 characters. Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=generate-a-random-string-at-least-32-chars-long

# The public URL of the app (used for session cookies and OAuth callbacks)
# Local: http://localhost:3000 | Production: https://applirank.com
# Railway PR/preview: optional when RAILWAY_ENVIRONMENT_NAME is a preview env.
# In preview, Applirank resolves URL automatically in this order:
#  1) https://applirank-applirank-pr-${RAILWAY_GIT_PR_NUMBER}.up.railway.app
#  2) https://${RAILWAY_PUBLIC_DOMAIN}
#  3) BETTER_AUTH_URL (fallback)
BETTER_AUTH_URL=http://localhost:3000

# Comma-separated allowed origins for auth requests.
# Railway recommendation:
#   BETTER_AUTH_TRUSTED_ORIGINS=https://${{RAILWAY_PUBLIC_DOMAIN}}
# Multiple origins example:
#   BETTER_AUTH_TRUSTED_ORIGINS=https://applirank.com,https://staging.applirank.com
# BETTER_AUTH_TRUSTED_ORIGINS=

# ─── Object Storage (Docker Compose) ────────
# Used by docker-compose.yml to configure the local MinIO container
STORAGE_USER=admin
STORAGE_PASSWORD=changeme

# ─── Object Storage (App — S3-compatible) ───
# Local (MinIO via Docker Compose):
#   S3_ENDPOINT=http://localhost:9000
#   S3_FORCE_PATH_STYLE=true
#
# Railway (Storage Bucket):
#   S3_ENDPOINT=${{Bucket.ENDPOINT}}
#   S3_FORCE_PATH_STYLE=false
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=admin
S3_SECRET_KEY=changeme
S3_BUCKET=applirank
S3_REGION=us-east-1

# Path-style URLs: true for MinIO (local dev), false for Railway Buckets / AWS S3
S3_FORCE_PATH_STYLE=true

# ─── Site URL (SSR + SEO) ───────────────────
# Used by @nuxtjs/seo for sitemap, canonical URLs, and OG tags
# Production: https://applirank.com
NUXT_PUBLIC_SITE_URL=http://localhost:3000

# ─── Optional: Demo Mode ────────────────────
# Set to an org slug to make that org read-only (blocks mutations)
# DEMO_ORG_SLUG=demo

# ─── Optional: Trusted Proxy ────────────────
# IP address of the reverse proxy (Railway/Cloudflare). When set,
# X-Forwarded-For is trusted for rate limiting IP extraction.
# TRUSTED_PROXY_IP=

# ─── Optional: In-App Feedback ──────────────
# Fine-grained GitHub PAT with Issues:write scope
# GITHUB_FEEDBACK_TOKEN=ghp_...
# GitHub repo in "owner/repo" format
# GITHUB_FEEDBACK_REPO=applirank/applirank

