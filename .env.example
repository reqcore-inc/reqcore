# ─────────────────────────────────────────────────────────────────────────────
# Reqcore — Environment Variable Reference
# ─────────────────────────────────────────────────────────────────────────────
# Local development: run ./setup.sh — it generates .env automatically.
# Production / manual setup: copy this file to .env and fill in the values.
# Railway: auto-detects this file and suggests variables during setup.

# ─── Database ────────────────────────────────────────────────────────────────
# Used by docker-compose.yml to configure the Postgres container
DB_USER=reqcore
DB_PASSWORD=change-me
DB_NAME=reqcore

# PostgreSQL connection string (used by host tools: drizzle-kit, drizzle studio)
# docker-compose overrides this with the internal Docker hostname for the app.
# Railway: ${{Postgres.DATABASE_URL}}
DATABASE_URL=postgresql://reqcore:change-me@localhost:5432/reqcore

# ─── Authentication ──────────────────────────────────────────────────────────
# Min 32-character random string. Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=replace-with-openssl-rand-base64-32-output

# Public URL of the app (used for session cookies and OAuth callbacks)
# Local: http://localhost:3000 | Production: https://yourdomain.com
# Railway PR/preview: auto-resolved from RAILWAY_PUBLIC_DOMAIN
BETTER_AUTH_URL=http://localhost:3000

# Comma-separated allowed origins (optional, for multi-domain setups)
# BETTER_AUTH_TRUSTED_ORIGINS=https://yourdomain.com

# ─── Object Storage (S3-compatible) ──────────────────────────────────────────
# Used by docker-compose.yml to configure the MinIO container
STORAGE_USER=reqcore
STORAGE_PASSWORD=change-me

# App-level S3 config (used by host tools)
# docker-compose overrides S3_ENDPOINT with http://minio:9000 for the app container
# Local (MinIO): S3_ENDPOINT=http://localhost:9000, S3_FORCE_PATH_STYLE=true
# Railway Bucket: S3_ENDPOINT=${{Bucket.ENDPOINT}}, S3_FORCE_PATH_STYLE=false
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=reqcore
S3_SECRET_KEY=change-me
S3_BUCKET=reqcore
S3_REGION=us-east-1
S3_FORCE_PATH_STYLE=true

# ─── SEO ─────────────────────────────────────────────────────────────────────
# Used by @nuxtjs/seo for sitemaps, canonical URLs, and OG tags
NUXT_PUBLIC_SITE_URL=http://localhost:3000

# Public URL for the "Upgrade to hosted plan" button in the preview upsell modal
# NUXT_PUBLIC_HOSTED_PLAN_URL=https://reqcore.com

# ─── Optional: Demo Mode ─────────────────────────────────────────────────────
# Set to an org slug to make that org read-only (blocks all mutations)
# Default seeded slug: reqcore-demo
# DEMO_ORG_SLUG=reqcore-demo

# ─── Optional: Trusted Proxy ─────────────────────────────────────────────────
# IP of the reverse proxy (Cloudflare, Railway, nginx). Enables accurate
# IP extraction from X-Forwarded-For for rate limiting.
# TRUSTED_PROXY_IP=

# ─── Optional: In-App Feedback ───────────────────────────────────────────────
# Fine-grained GitHub PAT with Issues:write scope
# GITHUB_FEEDBACK_TOKEN=ghp_...
# GitHub repo in "owner/repo" format
# GITHUB_FEEDBACK_REPO=reqcore/reqcore
